<!DOCTYPE html>

<html dir="rtl" lang="arabic">
  <head>
       <meta charset="UTF-8" />
       <title> twitter</title>
	   <link href="style.css" rel="stylesheet" type="text/css" media="screen"/>
       
</head>
<body>
	<div id="tfheader">
	
		<div id ="leftstyle">
	   <a href="https://www.facebook.com/nooon992"><img src="Images/fb.png" width="30" height="30" alt="Facebook" /></a>
        <a href="https://twitter.com/_nourah_92"><img src="Images/twitter.jpg" width="30" height="30" alt="Twitter" /></a>
        <a href="http://plus.google.com/nooon992"><img src="Images/google.png" width="30" height="30" alt="Goofle Plus" /></a>
       
        </div>
		
	 <div class="tfclear"></div>
	 
	</div>
	
     <div id="main"
          <div id="header">   
           <div id="tagline">
                 <h1>عالم التقنية</h1>
             </div>
			 <div style="clear:both"></div>
			 
              <ul id="menu">
                <li><a href="web Project.html">الرئيسية</a></li>
                <li><a href="News.html">الأخبار</a></li>
                <li><a href="Articles.html">المقالات</a></li>
                <li><a href="devicesPreview.html">مراجعات الأجهزة</a></li>
              </ul>
			  <div id ="nav">
			 </div>
			 <div style="clear:both"></div>
          </div><!--end header -->
     
          <div id="content">
		  <div id="sidebar">
			<p>الإعلانات</p>
			<hr> 
			<a href="https://www.yamsafer.me/?ref=tech#/"><img src="Images/ad.png" width="310" height="150" alt="Ads" /></a>
			  <p> الأحداث</p>
			  <hr>
			  <!--<p>
			  <label>Date:
			  <input type="date"/>-->
				<iframe src="https://www.google.com/calendar/embed?title=calender%20&amp;showTitle=0&amp;showPrint=0&amp;showTabs=0&amp;showCalendars=0&amp;showTz=0&amp;height=200&amp;wkst=1&amp;bgcolor=%23ffffff&amp;src=std.qu.edu.sa_8ehtql0v73t0ihibcv609u0v7k%40group.calendar.google.com&amp;color=%23182C57&amp;ctz=Asia%2FRiyadh" 
				style=" border-width:0 " width="300" height="200" frameborder="0" scrolling="no"></iframe>
			  </div><!--end sidebar-->
			   <p><a href="Web%20Project.html">الرئيسية</a>/<a href="Articles.html">المقالات</a>/تويتر </p>		
			
				  <hr style ="width:900px; margin-right:10px;">		
				  <br>
				   
				   <h2>تويتر</h2>
				   <p> <img src = "C:\Users\Toshiba\Documents\الدراسة\web project4\web project\Images\twitter.jpg"  width="800" height="250"></p>
	
                        <br><h4>

لا أحتاج أن أعرّف تويتر، الشبكة الاجتماعية الأكثر شهرة, حيث أنني متأكد أنّ الغالبية العظمى تستخدم هذه الخدمة بشكل يومي وطبعًا<br>
 هذه الخدمة أكبر مما يتوقعه البعض،لكن سأركّز على خدمة التايملاين “Timeline Service” لأنها الأكثر استخداماً في نظري وسأتحدث <br>
 عن بعض المشاكل وكيف تم حلها من قبل تويتر.<br>
 <br>

أولًا نستعرض أهم وأبرز مايتم استخدامه في تويتر:
 <br>
 <br>
 
 <br>Front-End: Ruby in Rails , Javascript
 
<br> Middle-Tier: Ruby on Rails, Scala
 
<br> (Backend: Java, Scala C++ (Scribe
 
<br> Database: MySQL, FlockDB, Redis
 <br>
 
 <br>
جميعنا نكتب تغريدات وتظهر على صفحتنا ومعها تغريدات من نتابعهم وأيضاً Retweets..<br>
لكن ماذا يحصل عندما نكتب تغريده؟ <br>
<br>
 
سواء كنت تستخدم موقع تويتر أو تطبيق ما، سيتم الاتصال بالواجهة البرمجية Twitter API <br>
وسيتم تخزين التغريدة في نظام مغلق المصدر يسمى T-Bird ومنهاإلى قواعد البيانات mySQL <br>
المنتشرة والمقسمة Sharded في مركز البيانات لكن عدد التغريدات مهول جدًا ويجب أن يكون لكل تغريدة رقم تعريفي.<br>
 
 <br>
 
مثلا هذه التغريدة https://twitter.com/SaifAlHarthi/status/274451543296708608، الرقم التعريفي لها هو 274451543296708608<br>
 وهذا رقم كبير جدًا يتم إنشائه بشكل متدرج من MySQL، إذن ماذا عملت تويتر؟ <br>
 <br>


أنشأت نظام مفتوح المصدر اسمه Snowflake يتكفل بعملية الإنشاء والفرز، بالتأكيد بشكل متوازي بسبب العدد <br>
الضخم من العمليات (مثال هذا المشروع يقوم بإنشاء 10 الآف تعريف في الثانية على الأقل) وبذلك يتم وضع رقم <br>
 تعريفي لتغريدتك وطبعاً هذا المشروع مكتوب بلغة Scala وهي لغة برمجة وظيفية وتقنيات البرمجة الوظيفية لها أثر واضح في الأنظمة المتوازية.<br>
 <br>

بعد ذلك يجب تحديد هذه التغريدة تذهب لمن، وهنا يأتي دور FlockDB وهي قاعدة بيانات لا تعتمد على لغة SQL للاستعلام <br>
ومبنية على أساسيات Graph Theory، وهي تفيد لتحديد علاقة من يتابع من وهكذا ببساطة هي مخزن كبير لقائمة من يجاورك <br>
 وفي هذه الحالة من يتابعك أو من تتابعه،لكن لماذا اختارت تويتر أن تبني هذه الأداة وتجعلها فوق MySQL على الرغم <br>
 من إمكانية عمل هذه بجدولين جدول للمستخدم وجدول ربط رقم تعريف المستخدم مع رقم تعريف من يتابع؟ <br>
 <br>
 
السبب يعود للعدد الكبير جدًا جدًا في قائمة المتابعة خصوصًا للمشاهير، وقد تقول أن الحل هو عمل فهرسة وتخزينها في <br>
 الذاكرة المؤقتة؟ لكن هذه الطريقة لا تنجح لأن مجموع الفهرسة قد يتجاوز حجم الذاكرة وبذلك يكون هناك خلل وإيقاف <br>
 وهذه كانت من أسباب سقوط تويتر بكثرة في الفترة الماضية، وكان هناك حل آخر وهو التخلص من عملية الـNormaliztion <br>
 وتقسيمها على حزم.وهذا الحل كان ممتازًا للعناصر الصغيرة لكنه مشكلة كبرى لمن لديهم الكثير من المتابعين حيث عملية<br>
 الحذف كانت تستغرق وقت كبير،وأيضًا في عملية الرد أو المنشن يجب أن يتم التعرف على المستخدمين الذين يتابعون المرسل والمستقبل لكي يروا التغريدة. <br>
 <br>
 كيف حلت flockDB هذه المشكله؟ 
 <br>
 <br>
في البداية يجب أن نعرف شي أساسي في نظرية المخططات Graph Theory وهي قائمة الجوار Adjacency List والتي <br>
 تتضح بشكل أكثر تفصيلًا في الصورة أدناه.
 <br> <br>
  <img src ="images/tww.jpg" height="400" width="800" />

<br><br><br>

بإمكانك التخيل من هذه الصورة أنّ القائمة ستكون أضخم ومليئة بالأرقام،والأرقام تمثل تعريف المستخدم UserID، <br>
 وحين تتم عملية تحديد القائمة التي سترى تغريدتك،سيتم فقط جلب قائمة من يتابعك ووضعها في التايملاين الخاص بهم <br>
 وهذا أسرع بكثير،وأيضا بالإمكان معرفة من حظر من، وفي عمليات أعقد يتم اقتراح حسابات للمتابعة (Graph Analysis). <br>
 <br>
FlockDB أيضًا مكتوب بلغة البرمجة Scala
<br>
<br>
بعد عملية التحديد ستكون هناك عملية إضافة التغريدة في تايملاين كل متابع،وهنا يأتي دور Kestrel وهو Message Queuing Syste<br>
m يتكفّل بعملية Fanout لتايملاين المتابعين بشكل متوازي (4000 متابع لكل عملية). هذا النظام Kestrel ليس مخصصًا للتايملاين فقط <br>
بل يستخدم في أنظمة كثيرة في تويتر وأيضًا يستخدمها إنستاجرام لإصدار أكثر من مساحة للصورة.<br>
 Kestrel مكتوب بلغة البرمجة Scala ايضًا وهو البديل الناجح لنظام Scarling المكتوب بلغة البرمجة Ruby.<br>
 
 
 
وبما أنّ التايملاين المخصص لكل مستخدم في تويتر يتم تخزينه في الذاكرة مسبقاً “Cached” باستخدام Redis <br>
وهي قاعدة بيانات لا تعتمد على SQL، وميزتها أنها سريعة ولها قدرة على تخزين هياكل لبيانات مختلفة. <br>
إذاً التايملاين للمستخدم الواحد هي عبارة عن Instance من Redis مكررة في أكثر من خادم لكن لماذا التكرار؟ <br>
السبب هنا لتفادي الأخطاء، لنفترض أن خادمٌ ما في مركز البيانات تعطل وفيه التايملاين الخاص بك لن تشعر بذلك لأنه سيتجه إلى نسخة اخرى منها مباشرة.<br>
 <br>
لكن كيف هو شكل التايملاين في Redis! كونها فقط تخزن هياكل بيانات مثل lists – int – string، وبعد كل هذه <br>
المراحل يتم تحضير التايملاين وإضافة التغريدات حال صدورها. <br>
 <br>

الشكل بسيط جدا في حالة التغريدات  <br><br>
 <img src ="images/tt.jpg" height="100" width="600" />
 <br>
 <br>
في حالة الريتويت يجب ان يكون هناك مؤشر للتغريدة الاصليه  <br><br>
 <img src ="images/tt2.jpg" height="100" width="600" />

 
 <br><br>
 
معظم هذه العمليات السابقة تحصل فقط في ضغطة زر، وأيضًا هناك عمليات أخرى مثل المتابعة حينما تتابع<br> أنت شخصٌ ما تتم إضافته إلى قائمة المتابعة بشكل مباشر، وتظهر لك أي تغريدة جديدة من ذلك المستخدم، <br>وهناك عملية البحث ولا نغفل أنّ تويتر يستخدم إصدار معدّل من مشروع Lucene المكتوب بلغة جافا، <br>لكن كيف يتم التواصل بين هذه الأنظمة على الرغم من اختلاف اللغات في معظم الأحيان وأيضًا التباعد؟<br>
 
 <br>
 
هنا يأتي دور RPC Frameworks وطبعاً من أشهرها Thrift والذي بنته فيسبوك <br>وتستخدمه شركات كثيرة والمشروع مفتوح المصدر و مكتوب بلغة C++.
<br>
 <br><br>
 
 
أتمنى أن أكون وفقت في الكتابة والشرح وأتمنى ترشيح تطبيق أو موقع آخر لشرحه وشكرا لكم.
     <br></h4>
 </p> 
			 
			 
          </div><!--end content-->
     
		  
	</div><!--end main-->
    
    <div id="footer">
	    <div class="container">
		<br>
		<br>
		 <hr color= #330033
            <p>&copy; كافة الحقوق محفوظة 2014-2015 &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;<a href="#">About Us</a></p>
			 
			 </div>
		</div><!--end footer container-->
    </div><!--end footer-->
      
  </body> 
  

</html>
